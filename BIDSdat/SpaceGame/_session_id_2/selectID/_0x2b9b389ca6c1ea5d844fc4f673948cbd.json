[('base_directory', PosixPath('/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat')), ('dat_overwrite', True), ('function_str', "def checkData(subject_list, session_id, base_directory, dat_overwrite):\n    import pandas as pd\n    from pathlib import Path\n    from nipype import Node, DataGrabber\n    from collections.abc import Iterable\n\n    #raw data\n    raw_data_path = Path(base_directory).joinpath('raw_data')\n\n    #database\n    database_path = Path(base_directory).joinpath('derivatives/preprocessed/beh/')\n\n    #get session\n    #check if session_id is an iterable\n    if isinstance(session_id, Iterable) == True:\n        session = str(''.join(session_id))\n    else:\n        session = str(session_id)\n\n    session_num = int(session)\n\n    #check if has 1 or 2 session lists\n    if isinstance(subject_list[0], str) == True:\n        subject_list_use = subject_list\n    else:\n        session = session_num - 1\n        subject_list_use = subject_list[session][0]\n\n    #check for existing data\n    if dat_overwrite is False:\n        #load data \n        database = Path(database_path).joinpath('task-space_summary.tsv')\n        Space_database = pd.read_csv(str(database), sep = '\\t', encoding = 'utf-8-sig', header = 0, engine='python')\n\n        #check session in database\n        db_sessions = Space_database.ses.unique()\n\n        #if session number is in database\n        if session_num in db_sessions:\n\n            Space_database_ses = Space_database.groupby('ses').get_group(session_num)\n\n            subs = list(subject_list_use)\n\n            for sub in subs:\n\n                #check if in database\n                if len(Space_database_ses[Space_database_ses['sub']==int(sub)].index.tolist()) > 0:\n                    subject_list_use.remove(sub)\n\n    #get file paths\n    if len(subject_list_use) > 0:\n        template_path = Path('sub-%s/ses-%s/beh/*task-space*.tsv')\n        selectfiles = Node(DataGrabber(infields=['subject_ids', 'session_id'],\n                      outfields=['sub_files'],\n                      base_directory = str(raw_data_path), \n                      template = str(template_path),\n                      sort_filelist = True),\n          name='selectfiles')\n        selectfiles.inputs.session_id = session_id\n        selectfiles.inputs.subject_ids = subject_list_use\n\n        sub_files = selectfiles.run().outputs.sub_files\n\n    else:\n        sub_files = 'No subfiles'\n\n    return sub_files\n"), ('session_id', '2'), ('subject_list', [[['105', '089', '039', '080', '103', '077', '098', '120', '045', '056', '048', '073', '074', '054', '090', '075', '112', '041', '113', '095', '084', '106', '057', '072', '111', '119', '117', '055', '047', '021', '121', '071', '093', '104', '116', '052', '078', '083', '069', '070', '107', '051', '068', '118', '096', '101', '049']], [['089', '001', '049', '039', '080', '006', '002', '023', '020', '045', '009', '074', '073', '094', '028', '054', '019', '041', '095', '005', '084', '043', '003', '055', '007', '038', '026', '021', '033', '071', '093', '018', '052', '035', '078', '011', '083', '037', '040', '051', '068', '096', '017']]]), ('needed_outputs', ['sub_files'])]