[
    [
        "SST_file",
        [
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-019/ses-1/beh/sub-019_ses-1_task-sst_events.tsv",
                "f10e0343bd8485a7a849c760ece96b00"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-007/ses-1/beh/sub-007_ses-1_task-sst_events.tsv",
                "77264c3f130f17ad2e92518e886ba4bd"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-107/ses-1/beh/sub-107_ses-1_task-sst_events.tsv",
                "3e917c9e54c8d47bf0a21ff39ce588ae"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-068/ses-1/beh/sub-068_ses-1_task-sst_events.tsv",
                "6047f8f010d00da1cba581ae22290a06"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-083/ses-1/beh/sub-083_ses-1_task-sst_events.tsv",
                "5e5d41ee58e886852031bb38e6a77918"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-074/ses-1/beh/sub-074_ses-1_task-sst_events.tsv",
                "ef61307af622b018f5ab77682da263b2"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-023/ses-1/beh/sub-023_ses-1_task-sst_events.tsv",
                "e25a7a6edf606f6a01c353e371cbb08f"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-001/ses-1/beh/sub-001_ses-1_task-sst_events.tsv",
                "55a9f09784bd42985c9e0795c7daeea2"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-077/ses-1/beh/sub-077_ses-1_task-sst_events.tsv",
                "c7d787ab44fead208221d79dac92c6a3"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-031/ses-1/beh/sub-031_ses-1_task-sst_events.tsv",
                "5ead9e6920935fc79f3d1e6649f21615"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-028/ses-1/beh/sub-028_ses-1_task-sst_events.tsv",
                "8125bd61d882017c2cf939b3bd377c21"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-056/ses-1/beh/sub-056_ses-1_task-sst_events.tsv",
                "8125bd61d882017c2cf939b3bd377c21"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-090/ses-1/beh/sub-090_ses-1_task-sst_events.tsv",
                "3bb3a695401b8dc79e5a760fb16523f9"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-041/ses-1/beh/sub-041_ses-1_task-sst_events.tsv",
                "5ab4f83554e58cd12ca9ff071a3892eb"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-071/ses-1/beh/sub-071_ses-1_task-sst_events.tsv",
                "888c39f52533a31ef26f799c1ff05274"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-095/ses-1/beh/sub-095_ses-1_task-sst_events.tsv",
                "8bf2e9a76c6db1e03567789b73b31832"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-039/ses-1/beh/sub-039_ses-1_task-sst_events.tsv",
                "316bc1cfcb818c0fca8537dc57fef4ed"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-084/ses-1/beh/sub-084_ses-1_task-sst_events.tsv",
                "26a04f95327d85d9d78a081f454ee6cd"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-018/ses-1/beh/sub-018_ses-1_task-sst_events.tsv",
                "2fcd57039efbb70fdcaeea3f516fb215"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-096/ses-1/beh/sub-096_ses-1_task-sst_events.tsv",
                "827014ac8069214ee1e859a3bdedd149"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-075/ses-1/beh/sub-075_ses-1_task-sst_events.tsv",
                "ba49bcda0581f45c4dbd056983723aa6"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-017/ses-1/beh/sub-017_ses-1_task-sst_events.tsv",
                "874d0c74fb6583fddfabec3665505791"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-049/ses-1/beh/sub-049_ses-1_task-sst_events.tsv",
                "fcf58741c5a15124fd23f7d8fd4ead7a"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-106/ses-1/beh/sub-106_ses-1_task-sst_events.tsv",
                "9b3f0e605fd3b25041834f30bbf391db"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-055/ses-1/beh/sub-055_ses-1_task-sst_events.tsv",
                "6dbeb51970ec4fd1e32e4a11f96495c1"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-026/ses-1/beh/sub-026_ses-1_task-sst_events.tsv",
                "5ead9e6920935fc79f3d1e6649f21615"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-070/ses-1/beh/sub-070_ses-1_task-sst_events.tsv",
                "e20a4af3215b083c42502dc926619b9a"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-104/ses-1/beh/sub-104_ses-1_task-sst_events.tsv",
                "af3c0c1a537a639f93fdae274000d578"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-037/ses-1/beh/sub-037_ses-1_task-sst_events.tsv",
                "8bf2e9a76c6db1e03567789b73b31832"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-069/ses-1/beh/sub-069_ses-1_task-sst_events.tsv",
                "70415a8f78cf58d78358bab32b443e74"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-040/ses-1/beh/sub-040_ses-1_task-sst_events.tsv",
                "bebb76f6e3733f44695fde1ea42bb35d"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-011/ses-1/beh/sub-011_ses-1_task-sst_events.tsv",
                "469b9ce952e4d085031c3d8b538f62dd"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-048/ses-1/beh/sub-048_ses-1_task-sst_events.tsv",
                "42b3139a232d08f9a52aed07ca67eda5"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-101/ses-1/beh/sub-101_ses-1_task-sst_events.tsv",
                "af3c0c1a537a639f93fdae274000d578"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-047/ses-1/beh/sub-047_ses-1_task-sst_events.tsv",
                "b8fb6fef91c520b42138d361c2b6f1ad"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-022/ses-1/beh/sub-022_ses-1_task-sst_events.tsv",
                "874d0c74fb6583fddfabec3665505791"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-005/ses-1/beh/sub-005_ses-1_task-sst_events.tsv",
                "f0b08bddf0eda0804563cef1f279f929"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-058/ses-1/beh/sub-058_ses-1_task-sst_events.tsv",
                "1e4530d717b631304c4893a7e3d0f69a"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-020/ses-1/beh/sub-020_ses-1_task-sst_events.tsv",
                "64bd9ad5880439b2d6e85b5c016f68ee"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-045/ses-1/beh/sub-045_ses-1_task-sst_events.tsv",
                "93b261eaa5884a0c2463eadc4f75df0c"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-093/ses-1/beh/sub-093_ses-1_task-sst_events.tsv",
                "af3c0c1a537a639f93fdae274000d578"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-073/ses-1/beh/sub-073_ses-1_task-sst_events.tsv",
                "61bd497db096f6914d9a9506b9fa61d7"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-030/ses-1/beh/sub-030_ses-1_task-sst_events.tsv",
                "96fcef6e235a27ec565b91400bebdb79"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-103/ses-1/beh/sub-103_ses-1_task-sst_events.tsv",
                "731626c9bb0bd757a2299891f4a03bca"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-004/ses-1/beh/sub-004_ses-1_task-sst_events.tsv",
                "0930c593fdbd20e7871114ad974d585b"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-006/ses-1/beh/sub-006_ses-1_task-sst_events.tsv",
                "d197b395179b07a25909ce9a2b8b4fc8"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-078/ses-1/beh/sub-078_ses-1_task-sst_events.tsv",
                "5ead9e6920935fc79f3d1e6649f21615"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-021/ses-1/beh/sub-021_ses-1_task-sst_events.tsv",
                "82fb644adaafe877c60a1b7c9045f6bb"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-080/ses-1/beh/sub-080_ses-1_task-sst_events.tsv",
                "59cc37cee5e26829e3dbc44c6b1c0553"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-043/ses-1/beh/sub-043_ses-1_task-sst_events.tsv",
                "facb6af7d11fcdb9e32d89afb2086df3"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-052/ses-1/beh/sub-052_ses-1_task-sst_events.tsv",
                "8f272c088dea124fe9632f1b4f07564e"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-036/ses-1/beh/sub-036_ses-1_task-sst_events.tsv",
                "01b11ca30e52c2d85676f247e894c07a"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-089/ses-1/beh/sub-089_ses-1_task-sst_events.tsv",
                "e25a7a6edf606f6a01c353e371cbb08f"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-038/ses-1/beh/sub-038_ses-1_task-sst_events.tsv",
                "8f8defc70c619288b7d9b45d9d3aa321"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-094/ses-1/beh/sub-094_ses-1_task-sst_events.tsv",
                "e3a77877c3f0f779e54abcc7d35ecc19"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-035/ses-1/beh/sub-035_ses-1_task-sst_events.tsv",
                "d09797fd19191bf3f2c8fea30f1da9e7"
            ],
            [
                "/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat/raw_data/sub-033/ses-1/beh/sub-033_ses-1_task-sst_events.tsv",
                "fb2ed744f9d9a724c6fc2e05c72b7178"
            ]
        ]
    ],
    [
        "function_str",
        "def summarySST(SST_file):\n    import numpy as np\n    import pandas as pd\n\n    ###################################################################\n    ####                   Sub-function script                     ####\n\n    #need to sub-functions within the function that is called by the node just \n    #like you need to re-import libraries\n    def summary_stats(SST_data):\n\n        ## ANALYSIS NOTE: \n        ## the original version of ANALYZE_IT and recommendations were to remove\n        ## the first trial of each block. However, this is not reccomended in the\n        ## concensus article Verbruggen et al., 2019 or in the new ANALYZE-IT-Tscope.R\n        ## code on Open Science Foundation (https://osf.io/dw4ke/). \n\n        ## to remove first trial of each block, uncomment below code:\n\n        #drop first row of each block\n        #if 1 in SST_data['block']:\n        #    block1 = SST_data.loc[SST_data['block'] == 1].index.values\n        #    SST_data = SST_data.drop(block1[0])\n        #    \n        #if 2 in SST_data['block']:\n        #    block2 = SST_data.loc[SST_data['block'] == 2].index.values\n        #    SST_data = SST_data.drop(block2[0])\n        #    \n        #if 3 in SST_data['block']:\n        #    block3 = SST_data.loc[SST_data['block'] == 3].index.values\n        #    SST_data = SST_data.drop(block3[0])\n        # \n        #if 4 in SST_data['block']:\n        #    block4 = SST_data.loc[SST_data['block'] == 4].index.values\n        #    SST_data = SST_data.drop(block4[0])\n\n        #trial counts\n        SST_target = SST_data.groupby('stop_signal').get_group(0)\n        SST_stop = SST_data.groupby('stop_signal').get_group(1)\n\n        #trial counts\n        sst_n_targets = SST_target.shape[0]\n        sst_n_stop = SST_stop.shape[0]\n        sst_go_correct = SST_target[SST_target['correct'] == 4].shape[0]\n        sst_go_error = SST_target[SST_target['correct'] == 2].shape[0]\n        sst_go_miss = SST_target[SST_target['correct'] == 1].shape[0]\n\n        #rt \n        go_rt = SST_target.loc[SST_target['rt_1'] > 0, 'rt_1'].mean(axis = 0)    \n        go_rt_correct = SST_target.loc[(SST_target['correct'] == 4) & (SST_target['rt_1'] > 0), 'rt_1'].mean(axis = 0)\n        go_rt_error = SST_target.loc[(SST_target['correct'] == 2) & (SST_target['rt_1'] > 0), 'rt_1'].mean(axis = 0)\n\n        us_rt = SST_stop.loc[(SST_stop['correct'] == 3) & (SST_stop['rt_1'] > 0), 'rt_1'].mean(axis = 0)\n\n        #probability of responding on signal  -- p(resp|signal)\n        signal_presp = SST_stop.loc[(SST_stop['correct'] == 3)].shape[0]/sst_n_stop\n\n        #SSD\n        ssd = SST_stop['true_ssd'].mean(axis = 0)\n\n        #racehorse check\n        if go_rt > us_rt:\n            racehorse = 1\n        else:\n            racehorse = 0\n\n        if racehorse == 1:\n\n            #SSRT Mean methods\n            ssrt_mean = SST_target.loc[SST_target['correct'] != 1, 'rt_1'].mean(axis = 0) - ssd\n\n            #SSRT Integration method\n            #replace omissions with max RT if there are omissions\n            if sst_go_miss > 0:\n                #get max rt\n                max_rt = max(SST_target.loc[SST_target['correct'] != 1, 'rt_1'])\n\n                #make new dataset\n                SST_target_replace = SST_target\n\n                #supress warning\n                pd.options.mode.chained_assignment = None\n\n                #replace ommitted rt values\n                SST_target_replace.loc[SST_target_replace['correct'] == 1, 'rt_1'] = max_rt\n\n                #get rt at signal_presp percentile\n                nth_rt = np.percentile(SST_target_replace['rt_1'], 100*signal_presp)\n\n            else:\n                #get rt at signal_presp percentile\n                nth_rt = np.percentile(SST_target['rt_1'], 100*signal_presp)\n\n\n            #caluclate ssrt\n            ssrt_int = nth_rt - ssd\n\n        else:\n            ssrt_mean = np.nan\n            ssrt_int = np.nan\n\n\n        #combine into array    \n        summary_results = [racehorse, sst_n_stop, sst_n_targets, go_rt, sst_go_correct, go_rt_correct, \n                         sst_go_error, go_rt_error, sst_go_miss, signal_presp, us_rt,\n                         ssd, ssrt_mean, ssrt_int]\n\n        return(summary_results)\n\n    ###################################################################\n    ####                Primary function script                    ####\n\n    if isinstance(SST_file, str):\n        #check to see if it is filepath str or 'No subfiles' message\n        if '.tsv' in SST_file:\n            #if only 1 file, will be string and we want an array\n            SST_file = [SST_file]\n        else:\n            SST_file = []\n\n    if len(SST_file) > 0:\n\n        #loop counter\n        count = 0\n\n        for file in SST_file:\n\n            #load data - loop throgh participant blockfiles\n            SST_ProcData = pd.read_csv(str(file), sep = '\\t', encoding = 'utf-8-sig', engine='python') \n\n            #check for incomplete blocks\n            block_counts = SST_ProcData['block'].value_counts()\n            to_remove = block_counts[block_counts < 64].index\n\n            if len(to_remove) > 0:\n                SST_ProcData = SST_ProcData[~SST_ProcData.block.isin(to_remove)]\n\n            #check for duplicate conditions - coding error in initial task randomization\n            cond_list = SST_ProcData.groupby('block')['block_cond'].unique()\n\n            #convert to strings\n            cond_list = [str(item[0]) for item in cond_list]\n            unique_cond = np.unique(cond_list)\n\n            #if there are duplicate blocks, re-label second instance\n            if len(unique_cond) < len(cond_list):\n                for cond in unique_cond:\n                    cond_group = SST_ProcData.groupby('block_cond').get_group(cond)\n\n                    #number of blocks with condition 'cond'\n                    nblocks = len(cond_group['block'].unique())\n\n                    if nblocks > 1:\n                        #get block number for second instance of cond\n                        dup_block = max(cond_group['block'])\n\n                        #for rows where column 'block' = dup_block, replace column 'block_cond'\n                        #values\n                        SST_ProcData.loc[SST_ProcData['block'] == dup_block, 'block_cond'] = SST_ProcData[SST_ProcData['block'] == dup_block]['block_cond'].replace(cond, 'dup_' + cond)\n\n            #remove duplicate blocks\n            SST_nodup_blocks = SST_ProcData[SST_ProcData['block_cond'].str.contains('dup')==False]\n\n            colnames = ['sub', 'block', 'condition', 'racehorse_check', 'n_stop_trials', 'n_go_trials', 'go_rt', 'n_go_cor', 'go_cor_rt', 'n_go_error',\n                'go_error_rt', 'n_go_miss', 'stop_prob_resp', 'us_rt', 'ssd', 'ssrt_mean', 'ssrt_int']\n\n            #summary stats - across all blocks\n            all_trials_stat = summary_stats(SST_nodup_blocks)\n            all_trials_stat.insert(0, SST_ProcData.loc[0, 'sub'])\n            all_trials_stat.insert(1, 'all')\n            all_trials_stat.insert(2, 'all')\n\n            if count == 0:\n                #make dataset\n                overall_summary_data = pd.DataFrame(all_trials_stat).T\n                overall_summary_data.columns = colnames\n            else:\n                overall_summary_data.loc[len(overall_summary_data)] = all_trials_stat\n\n            # summary stats - by block conditions\n\n            #check is there are 2 high ED blocks and 2 low ED blocks\n            hed_blocks = [item for item in unique_cond if 'hED' in item]\n            led_blocks = [item for item in unique_cond if 'lED' in item]\n\n            #ensure block_cond column is string\n            SST_nodup_blocks = SST_nodup_blocks.convert_dtypes()\n\n            if len(hed_blocks) == 2 and len(led_blocks) == 2:\n                #high ED data\n                SST_hed_blocks = SST_nodup_blocks[SST_nodup_blocks['block_cond'].str.contains('hED')]\n\n                hed_trials_stat = summary_stats(SST_hed_blocks)\n                hed_trials_stat.insert(0, SST_ProcData.loc[0, 'sub'])\n                hed_trials_stat.insert(1, 'h_ed')\n                hed_trials_stat.insert(2, 'h_ed')\n\n                #append new rows\n                overall_summary_data.loc[len(overall_summary_data)] = hed_trials_stat\n\n                #low ED data\n                SST_led_blocks = SST_nodup_blocks[SST_nodup_blocks['block_cond'].str.contains('lED')]\n\n                led_trials_stat = summary_stats(SST_led_blocks) \n                led_trials_stat.insert(0, SST_ProcData.loc[0, 'sub'])\n                led_trials_stat.insert(1, 'l_ed')\n                led_trials_stat.insert(2, 'l_ed')\n\n                #append new rows\n                overall_summary_data.loc[len(overall_summary_data)] = led_trials_stat\n\n            #check is there are 2 large portion blocks and 2 small portion blocksa\n            lport_blocks = [item for item in unique_cond if 'lPort' in item]\n            sport_blocks = [item for item in unique_cond if 'sPort' in item]\n\n            if len(lport_blocks) == 2 and len(sport_blocks) == 2:\n                #large portion data\n                SST_lport_blocks = SST_nodup_blocks[SST_nodup_blocks['block_cond'].str.contains('lPort')]\n\n                lport_trials_stat = summary_stats(SST_lport_blocks)\n                lport_trials_stat.insert(0, SST_ProcData.loc[0, 'sub'])\n                lport_trials_stat.insert(1, 'l_port')\n                lport_trials_stat.insert(2, 'l_port')\n\n                #append new rows\n                overall_summary_data.loc[len(overall_summary_data)] = lport_trials_stat\n\n\n                #small portion\n                SST_sport_blocks = SST_nodup_blocks[SST_nodup_blocks['block_cond'].str.contains('sPort')]\n\n                sport_trials_stat = summary_stats(SST_sport_blocks)\n                sport_trials_stat.insert(0, SST_ProcData.loc[0, 'sub'])\n                sport_trials_stat.insert(1, 's_port')\n                sport_trials_stat.insert(2, 's_port')\n\n                #append new rows\n                overall_summary_data.loc[len(overall_summary_data)] = sport_trials_stat\n\n            #summary stats by block\n\n            #get all non-duplicate blocks in dataset\n            blocks = SST_nodup_blocks['block'].unique()\n\n            #loop through blocks\n            for b in blocks:\n                #block data\n                b_data = SST_nodup_blocks[SST_nodup_blocks['block'] == b]\n\n                #ensure block_cond column is string\n                b_data = b_data.convert_dtypes()\n\n                #high ED, large portion\n                if b_data['block_cond'].str.contains('hED_lPort').any():\n\n                    hED_lPort_stat = summary_stats(b_data)\n                    hED_lPort_stat.insert(0, SST_ProcData.loc[0, 'sub'])\n                    hED_lPort_stat.insert(1, b)\n                    hED_lPort_stat.insert(2, 'hED_lPort')   \n\n                    #append new rows\n                    overall_summary_data.loc[len(overall_summary_data)] = hED_lPort_stat\n\n                #high ED, small portion        \n                elif b_data['block_cond'].str.contains('hED_sPort').any():\n\n                    hED_sPort_stat = summary_stats(b_data)\n                    hED_sPort_stat.insert(0, SST_ProcData.loc[0, 'sub'])\n                    hED_sPort_stat.insert(1, b)\n                    hED_sPort_stat.insert(2, 'hED_sPort')  \n\n                    #append new rows\n                    overall_summary_data.loc[len(overall_summary_data)] = hED_sPort_stat\n\n                #low ED, large portion\n                elif b_data['block_cond'].str.contains('lED_lPort').any():\n\n                    lED_lPort_stat = summary_stats(b_data)\n                    lED_lPort_stat.insert(0, SST_ProcData.loc[0, 'sub'])\n                    lED_lPort_stat.insert(1, b)\n                    lED_lPort_stat.insert(2, 'lED_lPort') \n\n                    #append new rows\n                    overall_summary_data.loc[len(overall_summary_data)] = lED_lPort_stat\n\n\n                #low ED, small portion\n                elif b_data['block_cond'].str.contains('lED_sPort').any():\n\n                    lED_sPort_stat = summary_stats(b_data)\n                    lED_sPort_stat.insert(0, SST_ProcData.loc[0, 'sub'])\n                    lED_sPort_stat.insert(1, b)\n                    lED_sPort_stat.insert(2, 'lED_sPort')\n\n                    #append new rows\n                    overall_summary_data.loc[len(overall_summary_data)] = lED_sPort_stat\n\n            #update count for files loop\n            count = 1\n\n    else:\n         overall_summary_data = 'no files'\n\n\n    return overall_summary_data\n"
    ],
    [
        "needed_outputs",
        [
            "summarySST_dat"
        ]
    ]
]