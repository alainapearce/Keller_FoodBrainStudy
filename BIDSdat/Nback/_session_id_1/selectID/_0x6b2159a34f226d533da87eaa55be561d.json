[('base_directory', PosixPath('/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat')), ('dat_overwrite', True), ('function_str', "def checkData(subject_list, session_id, base_directory, dat_overwrite):\n    import pandas as pd\n    from pathlib import Path\n    from nipype import Node, DataGrabber\n    from collections.abc import Iterable\n\n    #raw data\n    raw_data_path = Path(base_directory).joinpath('raw_data')\n\n    #database\n    database_path = Path(base_directory).joinpath('derivatives/preprocessed/beh/')\n\n    #get session\n    #check if session_id is an iterable\n    if isinstance(session_id, Iterable) == True:\n        session = str(''.join(session_id))\n    else:\n        session = str(session_id)\n\n    session_num = int(session)\n\n    #check if has 1 or 2 session lists\n    if isinstance(subject_list[0], str) == True:\n        subject_list_use = subject_list\n    else:\n        session = session_num - 1\n        subject_list_use = subject_list[session][0]\n\n    #load data \n    database = Path(database_path).joinpath('task-nback_summary.tsv')\n    Nback_database = pd.read_csv(str(database), sep = '\\t', encoding = 'utf-8-sig', header = 0, engine='python')\n\n    #check for existing data\n    if dat_overwrite is False:\n        #load data \n        database = Path(database_path).joinpath('task-nback_summary.tsv')\n        Nback_database = pd.read_csv(str(database), sep = '\\t', encoding = 'utf-8-sig', header = 0, engine='python')\n\n        #check session in database\n        db_sessions = Nback_database.session.unique()\n\n        #if session number is in database\n        if session_num in db_sessions:\n\n            Nback_database_ses = Nback_database.groupby('session').get_group(session_num)\n\n            subs = list(subject_list_use)\n\n            for sub in subs:\n\n                #check if in database\n                if len(Nback_database_ses[Nback_database_ses['sub']==int(sub)].index.tolist()) > 0:\n                    subject_list_use.remove(sub)\n\n    if len(subject_list_use) > 0:\n        template_path = Path('sub-%s/ses-%s/beh/*task-nback*.tsv')\n        selectfiles = Node(DataGrabber(infields=['subject_ids', 'session_id'],\n                      outfields=['blockFiles'],\n                      base_directory = str(raw_data_path), \n                      template = str(template_path),\n                      sort_filelist = True),\n          name='selectfiles')\n        selectfiles.inputs.session_id = session_id\n        selectfiles.inputs.subject_ids = subject_list_use\n\n        sub_files = selectfiles.run().outputs.blockFiles\n\n    else:\n        sub_files = 'No subfiles'\n\n    return sub_files\n"), ('session_id', '1'), ('subject_list', [[['020', '026', '045', '115', '112', '048', '072', '078', '121', '036', '028', '073', '081', '094', '057', '009', '084', '120', '055', '105', '006', '101', '049', '023', '007', '076', '022', '083', '119', '096', '054', '033', '095', '052', '035', '030', '047', '104', '075', '021', '080', '069', '056', '117', '011', '103', '118', '106', '074', '043', '040', '019', '058', '068', '038', '122', '093', '107', '018', '109', '005', '041', '089', '116', '070', '077', '039', '090', '017', '071', '098', '111', '031', '113', '051']], [['020', '026', '045', '003', '036', '078', '028', '094', '084', '055', '037', '006', '049', '007', '023', '001', '022', '083', '002', '096', '054', '033', '095', '052', '035', '021', '080', '011', '074', '043', '040', '019', '068', '093', '018', '005', '041', '089', '039', '017', '071', '038', '051']]]), ('needed_outputs', ['sub_files'])]