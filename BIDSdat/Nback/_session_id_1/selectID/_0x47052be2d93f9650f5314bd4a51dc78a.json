[('base_directory', PosixPath('/Users/azp271/OneDrive - The Pennsylvania State University/b-childfoodlab_Shared/Active_Studies/RO1_Brain_Mechanisms_IRB_5357/Participant_Data/BIDSdat')), ('dat_overwrite', False), ('function_str', "def checkData(subject_list, session_id, base_directory, dat_overwrite):\n    import pandas as pd\n    from pathlib import Path\n    from nipype import Node, DataGrabber\n    from collections.abc import Iterable\n\n    #raw data\n    raw_data_path = Path(base_directory).joinpath('raw_data')\n\n    #database\n    database_path = Path(base_directory).joinpath('derivatives/preprocessed/beh/')\n\n    #get session\n    #check if session_id is an iterable\n    if isinstance(session_id, Iterable) == True:\n        session = str(''.join(session_id))\n    else:\n        session = str(session_id)\n\n    session_num = int(session)\n\n    #check if has 1 or 2 session lists\n    if isinstance(subject_list[0], str) == True:\n        subject_list_use = subject_list\n    else:\n        session = session_num - 1\n        subject_list_use = subject_list[session][0]\n\n    #load data \n    database = Path(database_path).joinpath('task-nback_summary.tsv')\n    Nback_database = pd.read_csv(str(database), sep = '\\t', encoding = 'utf-8-sig', header = 0, engine='python')\n\n    #check for existing data\n    if dat_overwrite is False:\n        #load data \n        database = Path(database_path).joinpath('task-nback_summary.tsv')\n        Nback_database = pd.read_csv(str(database), sep = '\\t', encoding = 'utf-8-sig', header = 0, engine='python')\n\n        #check session in database\n        db_sessions = Nback_database.ses.unique()\n\n        #if session number is in database\n        if session_num in db_sessions:\n\n            Nback_database_ses = Nback_database.groupby('ses').get_group(session_num)\n\n            subs = list(subject_list_use)\n\n            for sub in subs:\n\n                #check if in database\n                if len(Nback_database_ses[Nback_database_ses['sub']==int(sub)].index.tolist()) > 0:\n                    #remove sub if in list that exists in database already\n                    print('Skipping sub-' + str(sub) + ' for session' + str(session_num) + ' - Exists in database already.')\n                    subject_list_use.remove(sub)\n\n    if len(subject_list_use) > 0:\n        template_path = Path('sub-%s/ses-%s/beh/*task-nback*.tsv')\n        selectfiles = Node(DataGrabber(infields=['subject_ids', 'session_id'],\n                      outfields=['blockFiles'],\n                      base_directory = str(raw_data_path), \n                      template = str(template_path),\n                      sort_filelist = True),\n          name='selectfiles')\n        selectfiles.inputs.session_id = session_id\n        selectfiles.inputs.subject_ids = subject_list_use\n\n        sub_files = selectfiles.run().outputs.blockFiles\n\n    else:\n        sub_files = 'No subfiles'\n\n    return sub_files\n"), ('session_id', '1'), ('subject_list', [[['107', '095', '098', '023', '035', '124', '018', '111', '114', '081', '047', '052', '104', '051', '116', '120', '080', '090', '039', '126', '078', '058', '038', '045', '125', '006', '106', '101', '109', '072', '112', '084', '056', '011', '122', '021', '121', '022', '068', '073', '019', '040', '075', '005', '096', '009', '036', '105', '115', '043', '123', '017', '070', '048', '030', '119', '077', '049', '094', '031', '083', '057', '071', '028', '089', '054', '074', '026', '117', '041', '118', '007', '093', '076', '020', '113', '069', '033', '103', '055']], [['084', '011', '095', '021', '080', '022', '023', '035', '003', '049', '094', '083', '002', '068', '071', '028', '019', '018', '089', '054', '040', '074', '001', '037', '026', '041', '039', '005', '096', '036', '007', '078', '038', '045', '093', '043', '020', '006', '017', '033', '052', '051', '055']]]), ('needed_outputs', ['sub_files'])]